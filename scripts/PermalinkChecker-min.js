var DM=DM||{};DM.PermalinkChecker=function(){var e="",n=0,r="",t="",i=1,a="",l=null,o=null;$(function(){e=$("#base_url").html(),a=$("#permalink-script").length?$("#permalink-script").val():"permalink-check-create",l=$("#title"),o=$("#permalink"),n=$("#id").val(),$.each(o,function(e,n){u($(n))}),l.keyup(function(){r(function(){c(l.val())},1e3)}),o.keyup(function(){r(function(){c(o.val())},1e3)});var r=function(){var e=0;return function(n,r){clearTimeout(e),e=setTimeout(n,r)}}()});var u=function(e){var n=e.siblings(".permalink_preloader"),r=e.position().left+e.outerWidth()-n.outerWidth(),t=e.position().top,i=e.outerHeight()-4;n.css({left:r-2+"px",top:t+2+"px",height:i+"px"})},c=function(r){$(".permalink_preloader").fadeIn(100,function(){$.ajax({type:"POST",url:e+"includes/ajax/"+a+".php",dataType:"json",data:{title:r,id:n},success:function(e){$(".permalink_preloader").fadeOut(100,function(){$("#permalink_error").html(""),o.val(""),"error"in e?f(e.error):o.val(e.permalink)})},error:p})})},p=function(e,n,r){$(".permalink_preloader").fadeOut(100,function(){f(n+" - "+r)})},f=function(e){$("#permalink_error").html(e).show()};return{check_permalink:c}}();